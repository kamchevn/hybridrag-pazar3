{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kamch\\\\emt-frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useMemo, useState } from 'react';\nimport './App.css';\nimport { askHybrid } from './api/hybridClient';\nimport QueryForm from './components/QueryForm';\nimport InteractionList from './components/InteractionList';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction generateId() {\n  return `${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n}\nexport default function App() {\n  _s();\n  const [query, setQuery] = useState('');\n  const [selectedModel, setSelectedModel] = useState('llama3.2:3b');\n  const [customModel, setCustomModel] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [validationMessage, setValidationMessage] = useState('');\n  const [history, setHistory] = useState([]);\n  const effectiveModel = useMemo(() => {\n    return selectedModel === '__custom__' ? (customModel || '').trim() : selectedModel;\n  }, [selectedModel, customModel]);\n  const handleSubmit = useCallback(async () => {\n    setError(null);\n    setValidationMessage('');\n    const trimmedQuery = (query || '').trim();\n    if (!trimmedQuery) {\n      setValidationMessage('Внесете прашање.');\n      return;\n    }\n    if (!effectiveModel) {\n      setValidationMessage('Изберете или внесете модел.');\n      return;\n    }\n    setIsLoading(true);\n    try {\n      const result = await askHybrid(trimmedQuery, effectiveModel);\n      const newItem = {\n        id: generateId(),\n        timestamp: new Date().toISOString(),\n        query: trimmedQuery,\n        model: effectiveModel,\n        answer: result.answer || '',\n        urls: Array.isArray(result.urls) ? result.urls : []\n      };\n      // newest first\n      setHistory(prev => [newItem, ...prev]);\n    } catch (err) {\n      setError((err === null || err === void 0 ? void 0 : err.message) || 'Настана непозната грешка.');\n    } finally {\n      setIsLoading(false);\n    }\n  }, [query, effectiveModel]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"app-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"app-title\",\n        children: \"Pazar3 AI Agent\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app-subtitle\",\n        children: \"\\u041F\\u0440\\u0430\\u0448\\u0430\\u0458 \\u0437\\u0430 \\u043E\\u0433\\u043B\\u0430\\u0441\\u0438 \\u0437\\u0430 \\u043D\\u0435\\u0434\\u0432\\u0438\\u0436\\u043D\\u043E\\u0441\\u0442\\u0438 \\u0438 \\u0434\\u043E\\u0431\\u0438\\u0458 \\u0440\\u0435\\u043B\\u0435\\u0432\\u0430\\u043D\\u0442\\u043D\\u0438 \\u043B\\u0438\\u043D\\u043A\\u043E\\u0432\\u0438.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"app-main\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"top-panel\",\n        children: [/*#__PURE__*/_jsxDEV(QueryForm, {\n          query: query,\n          onQueryChange: setQuery,\n          selectedModel: selectedModel,\n          onModelChange: setSelectedModel,\n          customModel: customModel,\n          onCustomModelChange: setCustomModel,\n          onSubmit: handleSubmit,\n          isLoading: isLoading,\n          validationMessage: validationMessage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this), error ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-box\",\n          role: \"alert\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"history-panel\",\n        children: /*#__PURE__*/_jsxDEV(InteractionList, {\n          history: history\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"app-footer\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"Backend: \", process.env.REACT_APP_API_BASE_URL || 'http://localhost:8080']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"OJwSvqKH78WgWHrXmFvpGNZ3bCA=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useCallback","useMemo","useState","askHybrid","QueryForm","InteractionList","jsxDEV","_jsxDEV","generateId","Date","now","Math","random","toString","slice","App","_s","query","setQuery","selectedModel","setSelectedModel","customModel","setCustomModel","isLoading","setIsLoading","error","setError","validationMessage","setValidationMessage","history","setHistory","effectiveModel","trim","handleSubmit","trimmedQuery","result","newItem","id","timestamp","toISOString","model","answer","urls","Array","isArray","prev","err","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onQueryChange","onModelChange","onCustomModelChange","onSubmit","role","process","env","REACT_APP_API_BASE_URL","_c","$RefreshReg$"],"sources":["C:/Users/kamch/emt-frontend/src/App.js"],"sourcesContent":["import React, { useCallback, useMemo, useState } from 'react';\r\nimport './App.css';\r\nimport { askHybrid } from './api/hybridClient';\r\nimport QueryForm from './components/QueryForm';\r\nimport InteractionList from './components/InteractionList';\r\n\r\nfunction generateId() {\r\n  return `${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\r\n}\r\n\r\nexport default function App() {\r\n  const [query, setQuery] = useState('');\r\n  const [selectedModel, setSelectedModel] = useState('llama3.2:3b');\r\n  const [customModel, setCustomModel] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [validationMessage, setValidationMessage] = useState('');\r\n  const [history, setHistory] = useState([]);\r\n\r\n  const effectiveModel = useMemo(() => {\r\n    return selectedModel === '__custom__' ? (customModel || '').trim() : selectedModel;\r\n  }, [selectedModel, customModel]);\r\n\r\n  const handleSubmit = useCallback(async () => {\r\n    setError(null);\r\n    setValidationMessage('');\r\n\r\n    const trimmedQuery = (query || '').trim();\r\n    if (!trimmedQuery) {\r\n      setValidationMessage('Внесете прашање.');\r\n      return;\r\n    }\r\n    if (!effectiveModel) {\r\n      setValidationMessage('Изберете или внесете модел.');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    try {\r\n      const result = await askHybrid(trimmedQuery, effectiveModel);\r\n      const newItem = {\r\n        id: generateId(),\r\n        timestamp: new Date().toISOString(),\r\n        query: trimmedQuery,\r\n        model: effectiveModel,\r\n        answer: result.answer || '',\r\n        urls: Array.isArray(result.urls) ? result.urls : []\r\n      };\r\n      // newest first\r\n      setHistory((prev) => [newItem, ...prev]);\r\n    } catch (err) {\r\n      setError(err?.message || 'Настана непозната грешка.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }, [query, effectiveModel]);\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <header className=\"app-header\">\r\n        <h1 className=\"app-title\">Pazar3 AI Agent</h1>\r\n        <div className=\"app-subtitle\">\r\n          Прашај за огласи за недвижности и добиј релевантни линкови.\r\n        </div>\r\n      </header>\r\n\r\n      <main className=\"app-main\">\r\n        <section className=\"top-panel\">\r\n          <QueryForm\r\n            query={query}\r\n            onQueryChange={setQuery}\r\n            selectedModel={selectedModel}\r\n            onModelChange={setSelectedModel}\r\n            customModel={customModel}\r\n            onCustomModelChange={setCustomModel}\r\n            onSubmit={handleSubmit}\r\n            isLoading={isLoading}\r\n            validationMessage={validationMessage}\r\n          />\r\n          {error ? (\r\n            <div className=\"error-box\" role=\"alert\">\r\n              {error}\r\n            </div>\r\n          ) : null}\r\n        </section>\r\n\r\n        <section className=\"history-panel\">\r\n          <InteractionList history={history} />\r\n        </section>\r\n      </main>\r\n\r\n      <footer className=\"app-footer\">\r\n        <span>\r\n          Backend: {process.env.REACT_APP_API_BASE_URL || 'http://localhost:8080'}\r\n        </span>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAC7D,OAAO,WAAW;AAClB,SAASC,SAAS,QAAQ,oBAAoB;AAC9C,OAAOC,SAAS,MAAM,wBAAwB;AAC9C,OAAOC,eAAe,MAAM,8BAA8B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3D,SAASC,UAAUA,CAAA,EAAG;EACpB,OAAO,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIC,IAAI,CAACC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;AAClE;AAEA,eAAe,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EAC5B,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACiB,aAAa,EAAEC,gBAAgB,CAAC,GAAGlB,QAAQ,CAAC,aAAa,CAAC;EACjE,MAAM,CAACmB,WAAW,EAAEC,cAAc,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACqB,SAAS,EAAEC,YAAY,CAAC,GAAGtB,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAACuB,KAAK,EAAEC,QAAQ,CAAC,GAAGxB,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACyB,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG1B,QAAQ,CAAC,EAAE,CAAC;EAC9D,MAAM,CAAC2B,OAAO,EAAEC,UAAU,CAAC,GAAG5B,QAAQ,CAAC,EAAE,CAAC;EAE1C,MAAM6B,cAAc,GAAG9B,OAAO,CAAC,MAAM;IACnC,OAAOkB,aAAa,KAAK,YAAY,GAAG,CAACE,WAAW,IAAI,EAAE,EAAEW,IAAI,CAAC,CAAC,GAAGb,aAAa;EACpF,CAAC,EAAE,CAACA,aAAa,EAAEE,WAAW,CAAC,CAAC;EAEhC,MAAMY,YAAY,GAAGjC,WAAW,CAAC,YAAY;IAC3C0B,QAAQ,CAAC,IAAI,CAAC;IACdE,oBAAoB,CAAC,EAAE,CAAC;IAExB,MAAMM,YAAY,GAAG,CAACjB,KAAK,IAAI,EAAE,EAAEe,IAAI,CAAC,CAAC;IACzC,IAAI,CAACE,YAAY,EAAE;MACjBN,oBAAoB,CAAC,kBAAkB,CAAC;MACxC;IACF;IACA,IAAI,CAACG,cAAc,EAAE;MACnBH,oBAAoB,CAAC,6BAA6B,CAAC;MACnD;IACF;IAEAJ,YAAY,CAAC,IAAI,CAAC;IAClB,IAAI;MACF,MAAMW,MAAM,GAAG,MAAMhC,SAAS,CAAC+B,YAAY,EAAEH,cAAc,CAAC;MAC5D,MAAMK,OAAO,GAAG;QACdC,EAAE,EAAE7B,UAAU,CAAC,CAAC;QAChB8B,SAAS,EAAE,IAAI7B,IAAI,CAAC,CAAC,CAAC8B,WAAW,CAAC,CAAC;QACnCtB,KAAK,EAAEiB,YAAY;QACnBM,KAAK,EAAET,cAAc;QACrBU,MAAM,EAAEN,MAAM,CAACM,MAAM,IAAI,EAAE;QAC3BC,IAAI,EAAEC,KAAK,CAACC,OAAO,CAACT,MAAM,CAACO,IAAI,CAAC,GAAGP,MAAM,CAACO,IAAI,GAAG;MACnD,CAAC;MACD;MACAZ,UAAU,CAAEe,IAAI,IAAK,CAACT,OAAO,EAAE,GAAGS,IAAI,CAAC,CAAC;IAC1C,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZpB,QAAQ,CAAC,CAAAoB,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEC,OAAO,KAAI,2BAA2B,CAAC;IACvD,CAAC,SAAS;MACRvB,YAAY,CAAC,KAAK,CAAC;IACrB;EACF,CAAC,EAAE,CAACP,KAAK,EAAEc,cAAc,CAAC,CAAC;EAE3B,oBACExB,OAAA;IAAKyC,SAAS,EAAC,KAAK;IAAAC,QAAA,gBAClB1C,OAAA;MAAQyC,SAAS,EAAC,YAAY;MAAAC,QAAA,gBAC5B1C,OAAA;QAAIyC,SAAS,EAAC,WAAW;QAAAC,QAAA,EAAC;MAAe;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC9C9C,OAAA;QAAKyC,SAAS,EAAC,cAAc;QAAAC,QAAA,EAAC;MAE9B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CAAC,eAET9C,OAAA;MAAMyC,SAAS,EAAC,UAAU;MAAAC,QAAA,gBACxB1C,OAAA;QAASyC,SAAS,EAAC,WAAW;QAAAC,QAAA,gBAC5B1C,OAAA,CAACH,SAAS;UACRa,KAAK,EAAEA,KAAM;UACbqC,aAAa,EAAEpC,QAAS;UACxBC,aAAa,EAAEA,aAAc;UAC7BoC,aAAa,EAAEnC,gBAAiB;UAChCC,WAAW,EAAEA,WAAY;UACzBmC,mBAAmB,EAAElC,cAAe;UACpCmC,QAAQ,EAAExB,YAAa;UACvBV,SAAS,EAAEA,SAAU;UACrBI,iBAAiB,EAAEA;QAAkB;UAAAuB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtC,CAAC,EACD5B,KAAK,gBACJlB,OAAA;UAAKyC,SAAS,EAAC,WAAW;UAACU,IAAI,EAAC,OAAO;UAAAT,QAAA,EACpCxB;QAAK;UAAAyB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,GACJ,IAAI;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,eAEV9C,OAAA;QAASyC,SAAS,EAAC,eAAe;QAAAC,QAAA,eAChC1C,OAAA,CAACF,eAAe;UAACwB,OAAO,EAAEA;QAAQ;UAAAqB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9B,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CAAC,eAEP9C,OAAA;MAAQyC,SAAS,EAAC,YAAY;MAAAC,QAAA,eAC5B1C,OAAA;QAAA0C,QAAA,GAAM,WACK,EAACU,OAAO,CAACC,GAAG,CAACC,sBAAsB,IAAI,uBAAuB;MAAA;QAAAX,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACD,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV;AAACrC,EAAA,CAxFuBD,GAAG;AAAA+C,EAAA,GAAH/C,GAAG;AAAA,IAAA+C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}